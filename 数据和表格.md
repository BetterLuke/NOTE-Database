# 关系比较逻辑符

SQL 支持布尔运算 and、or 和 not，和 Python 中的运算规则一样。甚至还可以使用“！=”。
表达式 (not X) and (not Y) 和 not (X or Y) 可以互换，这是由德摩根定律决定的。

![]("关系数据库入门 - Udacity-聚合.png")

```SQL
语句1：select * from student limit 9,4
语句2：slect * from student limit 4 offset 9
// 语句1和2均返回表student的第10、11、12、13行  
//语句2中的4表示返回4行，9表示从表的第十行开始
```
# 分组
GROUP BY 只和count或sum这种聚合函数一起用。

# 原子态

>原子态是一个很重要的数据库原则，原子态意味着一组改动要么全部一起发生，要么全部都不发生。

# 防止SQL注入攻击

```python
c.execute("INSERT INTO posts (content) VALUES (‘%s’)" % content) #会有SQL注入的危险 '); delete from table_name; -- 整个表格就没了
c.execute("INSERT INTO posts (content) VALUES (%s)" , (content,)) #使用python的tuple，是使用了请求参数，不用字符串的通配符
```

这里发现了一个对则，在一个括号的内部，用逗号`,`分割前面的占位符与后面的数据实体，如果没有括号，就需要用`%`链接。

# 规范化表格的规则：
1. 每行都具有相同数量的列。
实际上，数据库系统不允许在不同的行里具有不同数量的列。但是如果某些列有时候为空，有时候不为空，或者如果我们将多个值放入一个字段里，我们可以调整下此规则。

拿动物园数据库中的 diet 表格为例。我们将某个物种会吃的多种食物放入多行，而不是放在一行里。这样的话，汇总和比较时就操作简单多了。

2. 表格存在唯一键，一行里的所有内容都围绕该键展开。
键可以是一列或多列。甚至可以是整行内容，就像 diet 表格一样。但是一个表格里没有重复的行。

更重要的是，如果我们要存储不是唯一的内容，例如人们的姓名，我们就使用唯一标识符（例如序列号）区分它们。这样可以确保我们不会将两个姓名相同的人的分数或违规停车罚单汇总到一起。

3. 与唯一键不相关的内容放在其他表格中。
例如 items 表格，里面有条目、它们的地点和地点的街道地址。地址不是关于条目的内容，它是关于地点的内容。将地址放到另一表格里可以节省空间，并避免造成混淆，我们始终可以使用 join 重新组成原始表格。

4. 表格不应该暗示不存在的关系。
例如 job_skills 表格，一行列出某人的技术技能（例如“Linux”）和某个语言技能（例如“法语”）。这样看起来就好像 Linux 技能是特定于法语，反之亦然，但现实中不是这种情况。规范化这一情况需要将技术技能和工作技能放在不同的表格里。


# 外键

声明一个表格可以有多个外键，但是只能有一个主键，这个主键可以是多个列联合声明的。

# 链接

## 外联

left join 返回所有这些行以及左侧表格中有但是右侧表格中没有的行。right join 对右侧表格执行相同的操作。